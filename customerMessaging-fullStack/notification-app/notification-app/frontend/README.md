# bookmark

> A Vue.js project

## Build Setup

``` bash
# install dependencies
npm install

# serve with hot reload at localhost:8080
npm run dev

# Install AWS Amplify and vue plugins.
npm add aws-amplify aws-amplify-vue @aws-amplify/ui-vue

# Initialize Amplify
amplify init
```

```plain
Note: It is recommended to run this command from the root of your app directory
? Enter a name for the project lab1
? Enter a name for the environment dev
? Choose your default editor: Visual Studio Code
? Choose the type of app that you're building javascript  
Please tell us about your project
? What javascript framework are you using vue
? Source Directory Path:  src
? Distribution Directory Path: dist
? Build Command:  npm.cmd run-script build  
? Start Command: npm.cmd run-script serve
Using default provider  awscloudformation

For more information on AWS Profiles, see:
https://docs.aws.amazon.com/cli/latest/userguide/cli-multiple-profiles.html

? Do you want to use an AWS profile? Yes
? Please choose the profile you want to use amplify

```
```bash
# Add Amplify Auth to the app

amplify add auth
```

```plain
Warning: you will not be able to edit these selections.     
 How do you want users to be able to sign in? Username       
 Do you want to configure advanced settings? No, I am done.
```
```bash
# Push the configuration 

amplify push
```
```plain
âˆš Successfully pulled backend environment dev from the cloud.

Current Environment: dev

| Category | Resource name | Operation | Provider plugin   |
| -------- | ------------- | --------- | ----------------- |
| Auth     | lab1748181eb  | Create    | awscloudformation |
? Are you sure you want to continue? Yes
```
# Modify file main.js and App.vue at root folder

### Main.js: Add

import '@aws-amplify/ui-vue';
import Amplify from '@aws-amplify/core';
import { Auth } from '@aws-amplify/auth';
import awsmobile from './aws-exports';

Amplify.configure(awsmobile);

Auth.configure(awsmobile)

### App.vue: Update 

<template>
	<div id="app">
    	<Navbar />
		<amplify-authenticator class="center">
		<div id="amplify-signout">
			<amplify-sign-out></amplify-sign-out>
		</div>
    	<router-view />
		</amplify-authenticator>
    	<Footer />
  	</div>
</template>


# Add below to style sign-out button inside <style></style>

#amplify-signout {
  width: 100px;
  margin: 5px auto;
}

# Validate aws-export.js file has all

### https://cors-anywhere.herokuapp.com/ is added to bypass the cors errors during development.

```plain
/* eslint-disable */
// WARNING: DO NOT EDIT. This file is automatically generated by AWS Amplify. It will be overwritten.

const awsmobile = {
    "aws_project_region": "us-east-1",
    "aws_cognito_identity_pool_id": "Enter cognito id pool",
    "aws_cognito_region": "us-east-1",
    "aws_user_pools_id": "<Enter user pool id>",
    "aws_user_pools_web_client_id": "<Enter web client id>",
    "oauth": {},
    "aws_cloud_logic_custom": [
        {
            "name": "Bookmark App",
            "endpoint": "https://cors-anywhere.herokuapp.com/<Enter API Gateway URL>",
            "region": "us-east-1"
        }
    ]
};


export default awsmobile;

```

# Restart app if not active and test authentication

```bash
# serve with hot reload at localhost:8080
npm run dev

# build for production with minification
npm run build
```

# build for production and view the bundle analyzer report
npm run build --report
```

For a detailed explanation on how things work, check out the [guide](http://vuejs-templates.github.io/webpack/) and [docs for vue-loader](http://vuejs.github.io/vue-loader).
